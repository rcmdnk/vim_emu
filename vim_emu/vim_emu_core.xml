<?xml version="1.0"?>
<root>
  <item>
    <name>Settings</name>
    <appendix>At least "Enable Vim Emulation" must be enabled.</appendix>
    <appendix>Then, choose mode change keyes as you like.</appendix>
    <appendix>Note: Simultaneous jk/qw/sd must be used with</appendix>
    <appendix>one of ChangeKey 1, 3, 4, 6, 10-12</appendix>
    <appendix>to leave such Virtual mode.</appendix>
    <appendix>ChangeKey 3 or 6 are useful if you want to use</appendix>
    <appendix>ESC/Ctrl-[ as is in modes other than Insert Mode.</appendix>
  </item>
  <item>
    <name>ChangeKey1: Escape to enter Normal Mode</name>
    <appendix>Holding Esc emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_escape_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Turn Off also IME if enabled -->
        <inputsource_only>JAPANESE</inputsource_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          KeyCode::VK_CHANGE_INPUTSOURCE_JAPANESE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Other than Normal Mode -->
        <config_not>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_not>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey2: Escape to back in Insert Mode from Normal Mode</name>
    <appendix>Use with above, to toggle modes with Escape.</appendix>
    <appendix>Holding Esc emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_escape_toggle_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Normal Mode --> 
        <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey3: Escape to back in Normal Mode in other than Insert Mode</name>
    <appendix>All parts are overlapped with</appendix>
    <appendix>"Escape to enter Normal Mode",</appendix>
    <appendix>but it doesn't switch on Normal Mode in Insert Mode.</appendix>
    <appendix>Useful to use with simultaneous keys.</appendix>
    <appendix>Holding Esc emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_escape_not_insert{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Other than Insert Mode -->
        <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey4: Ctrl-[ to enter Normal Mode</name>
    <appendix>Holding Ctrl-[ emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_ctrl_lb_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Turn Off also IME if enabled -->
        <inputsource_only>JAPANESE</inputsource_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          KeyCode::VK_CHANGE_INPUTSOURCE_JAPANESE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Other than Normal Mode -->
        <config_not>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_not>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey5: Ctrl-[ to back in Insert Mode from Normal Mode</name>
    <appendix>Use with above, to toggle modes with Ctrl-[].</appendix>
    <appendix>Holding Ctrl-[ emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_ctrl_lb_toggles_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Normal Mode --> 
        <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey6: Ctrl-[ to back in Normal mode in other than Insert Mode.</name>
    <appendix>All parts are overlapped with</appendix>
    <appendix>"Ctrl-[ to enter Normal Mode",</appendix>
    <appendix>but it doesn't switch on Normal Mode in Insert Mode.</appendix>
    <appendix>Holding Ctrl-[ emulate normal Esc.</appendix>
    <identifier>remap.vim_emu_ctrl_lb_not_insert{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
      <block> <!-- Other than Insert Mode -->
        <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __HoldingKeyToKey__ KeyCode::BRACKET_LEFT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_NONE,
          KeyCode::ESCAPE, Option::NOREPEAT
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey7: Simultaneous jk toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, nothing happens.</appendix>
    <identifier>remap.vim_emu_jk_toggle_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <!-- __SimultaneousKeyPresses__ makes a problem
         if same combination is defined in different config state.
         If it is set as "Enter Normal Mode" in Insert Mode (no config)
              and set as "Back in Insert Mode" in Normal Mode,
         it shows repeat j/k when push j/k after entering Normal mode.
         Therefore, for simultaneous keys,
         only toggles are used only when Insert/Normal mode.
         As two options have to be toggled,
         it is not possible to support in such Viertual mode.
         Hence, the combination set to do nothing in such Virtual mode.
    -->
    <block>
      <block>
        <config_not>{{VIM_EMU_NOT_NORMAL_MODE}}</config_not>
        <autogen>
          __SimultaneousKeyPresses__
          KeyCode::J, KeyCode::K,
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey8: Simultaneous qw toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, it changes to Insert Mode.</appendix>
    <identifier>remap.vim_emu_qw_toggle_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block>
        <config_not>{{VIM_EMU_NOT_NORMAL_MODE}}</config_not>
        <autogen>
          __SimultaneousKeyPresses__
          KeyCode::Q, KeyCode::W,
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey9: Simultaneous sd toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, nothing happens.</appendix>
    <identifier>remap.vim_emu_sd_toggle_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block>
        <config_not>{{VIM_EMU_NOT_NORMAL_MODE}}</config_not>
        <autogen>
          __SimultaneousKeyPresses__
          KeyCode::S, KeyCode::D,
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_TOGGLE_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
    </block>
  </item>
  <item>
    <name>ChangeKey10: Ctrl-l toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, nothing happens.</appendix>
    <identifier>remap.vim_emu_ctrl_l_toggles_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Vim Mode --> 
        <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Other case -->
          __KeyToKey__ KeyCode::L,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyToKey__ KeyCode::L,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyToKey__ KeyCode::L,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
        </autogen>
      </block>
      <block> <!-- Turn Off also IME if enabled -->
        <inputsource_only>JAPANESE</inputsource_only>
        <autogen>
          __KeyToKey__ KeyCode::L,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          KeyCode::VK_CHANGE_INPUTSOURCE_JAPANESE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
        </autogen>
      </block>
      <autogen> <!-- Other case -->
        __KeyToKey__ KeyCode::L,
        MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL,
        {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
      </autogen>
    </block>
  </item>
  <item>
    <name>ChangeKey11: Left Cmd toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, it changes to Insert Mode.</appendix>
    <identifier>remap.vim_emu_l_cmd_toggles_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Vim Mode --> 
        <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Other case -->
          __KeyOverlaidModifier__
          KeyCode::COMMAND_L,
          KeyCode::COMMAND_L, <!-- Need one key shot to use as modifier -->
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_L,
          KeyCode::COMMAND_L,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_L,
          KeyCode::COMMAND_L,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
        </autogen>
      </block>
      <block> <!-- Turn Off also IME if enabled -->
        <inputsource_only>JAPANESE</inputsource_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_L,
          KeyCode::COMMAND_L,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          KeyCode::VK_CHANGE_INPUTSOURCE_JAPANESE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
        </autogen>
      </block>
      <autogen> <!-- Other case -->
        __KeyOverlaidModifier__
        KeyCode::COMMAND_L,
        KeyCode::COMMAND_L,
        {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
      </autogen>
    </block>
  </item>
  <item>
    <name>ChangeKey12: Rgiht Cmd toggles Insert Mode - Normal Mode</name>
    <appendix>In Virtual or Command mode, it changes to Insert Mode.</appendix>
    <identifier>remap.vim_emu_r_cmd_toggles_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <block> <!-- Vim Mode --> 
        <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Other case -->
          __KeyOverlaidModifier__
          KeyCode::COMMAND_R,
          KeyCode::COMMAND_R,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Complement Mode -->
        <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_R,
          KeyCode::COMMAND_R,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block>
      <block> <!-- Search Mode -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_R,
          KeyCode::COMMAND_R,
          KeyCode::ESCAPE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
        </autogen>
      </block>
      <block> <!-- Turn Off also IME if enabled -->
        <inputsource_only>JAPANESE</inputsource_only>
        <autogen>
          __KeyOverlaidModifier__
          KeyCode::COMMAND_R,
          KeyCode::COMMAND_R,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          KeyCode::VK_CHANGE_INPUTSOURCE_JAPANESE,
          KeyCode::VK_CHANGE_INPUTSOURCE_ENGLISH,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
        </autogen>
      </block>
      <autogen> <!-- Other case -->
        __KeyOverlaidModifier__
        KeyCode::COMMAND_R,
        KeyCode::COMMAND_R,
        {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
      </autogen>
    </block>
  </item>
  <item>
    <name>Enable Visual Block Mode</name>
    <appendix>Use with ESC/C-[ above and "Enable Vim Emulation"</appendix>
    <appendix>Visual Block starts from where mouse cursor is,</appendix>
    <appendix>instead of where cursor in editer is.</appendix>
    <identifier>remap.vim_emu_vb_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
    <!-- Cmd-v: Enter Visual Block Mode -->
    <autogen>
      __KeyToKey__ KeyCode::V,
      MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
      KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
      KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_visual_block{{VIM_EMU_ALTCONFIG}},
      KeyCode::VK_LOCK_COMMAND_L_FORCE_ON,
      KeyCode::VK_LOCK_OPTION_L_FORCE_ON,
      KeyCode::VK_MOUSEKEY_LOCK_BUTTON_LEFT,
    </autogen>
  </item>
  <item>
    <name>Enable Recording Macro</name>
    <appendix>q in Normal mode to start recording key inputs.</appendix>
    <appendix>q in Normal mode to stop recording key inputs.</appendix>
    <appendix>@ to execute recorded key inputs.</appendix>
    <appendix>n@ (n=2-9) to execute recorded key inputs n-times.</appendix>
    <appendix>Need additional application like MadRuby.</appendix>
    <appendix>MadRuby: http://www.wingsforpigs.com/MadRuby/MadRuby.html</appendix>
    <appendix>Set Keyboard Shortcuts like:</appendix>
    <appendix>    Start Recording: Ctrl-Shift-Cmd-6</appendix>
    <appendix>     Stop Recording: Ctrl-Shift-Cmd-7</appendix>
    <appendix>         Play Macro: Ctrl-Shift-Cmd-8</appendix>
    <appendix>Multiple Play Macro: Ctrl-Shift-Cmd-9</appendix>
    <identifier>remap.vim_emu_record_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
      <config_not>notsave.vim_emu_record{{VIM_EMU_ALTCONFIG}}</config_not>
      <autogen>
        __KeyToKey__ KeyCode::Q, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_record{{VIM_EMU_ALTCONFIG}},
        KeyCode::KEY_6, ModifierFlag::CONTROL_L|
        ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L
      </autogen>
    </block>
    <block>
      <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
      <config_only>notsave.vim_emu_record{{VIM_EMU_ALTCONFIG}}</config_only>
      <autogen>
        __KeyToKey__ KeyCode::Q, ModifierFlag::NONE,
        KeyCode::KEY_7, ModifierFlag::CONTROL_L|
        ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L,
        KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_record{{VIM_EMU_ALTCONFIG}},
      </autogen>
    </block>
    <block>
      <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
      <include path="vim_emu_repeat_macro.xml">
        <replacementdef>
          <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
          <replacementvalue>
            KeyCode::KEY_2, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          </replacementvalue>
        </replacementdef>
      </include>
      <include path="vim_emu_repeat_macro.xml"><!-- for JIS -->
        <replacementdef>
          <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
          <replacementvalue>
            KeyCode::JIS_ATMARK, ModifierFlag::NONE,
          </replacementvalue>
        </replacementdef>
      </include>
      <include path="vim_emu_repeat_macro.xml"><!-- for German -->
        <replacementdef>
          <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
          <replacementvalue>
            KeyCode::Q, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_OPTION|ModifierFlag::NONE,
          </replacementvalue>
        </replacementdef>
      </include>
    </block>
  </item>
  <item>
    <name>Enable Vim Emulation</name>
    <appendix>Only APPs {{VIM_EMU_ONLY_APPS}} </appendix>
    <appendix>Ignore APPs {{VIM_EMU_IGNORE_APPS}}</appendix>
    <identifier>remap.vim_emu_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block> <!-- INSERT Mode (OS Normal State) -->
      <block>
        <config_not>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_not>
        <!-- Complement Mode -->
        <block>
          <config_only>notsave.vim_emu_complement{{VIM_EMU_ALTCONFIG}}</config_only>
          <autogen>
            __KeyToKey__ KeyCode::N,
            MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            KeyCode::CURSOR_DOWN,
          </autogen>
          <autogen>
            __KeyToKey__ KeyCode::P,
            MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            KeyCode::CURSOR_UP,
          </autogen>
          <autogen>
            __KeyToKey__ KeyCode::H,
            MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            KeyCode::ESCAPE,
            {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
          </autogen>
        </block>
        <autogen>
          __KeyToKey__ KeyCode::N,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
          KeyCode::ESCAPE,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_complement{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::P,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
          KeyCode::ESCAPE,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_complement{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
      <block>
        <!-- Search -->
        <config_only>notsave.vim_emu_search{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyToKey__ KeyCode::RETURN, ModifierFlag::NONE,
          KeyCode::RETURN,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
    </block> <!-- INSERT Mode -->
    <block>
      <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
      <!-- *************************************** -->
      <!-- Start g command -->
      <block>
        <config_not>notsave.vim_emu_G{{VIM_EMU_ALTCONFIG}}</config_not>
        <autogen>
          __KeyToKey__ KeyCode::G, ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_G{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
        </autogen>
      </block>
      <!-- YANK Mode -->
      <block>
        <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Fix Y -->
          __KeyToKey__ KeyCode::Y,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::A, ModifierFlag::CONTROL_L|ModifierFlag::SHIFT_L,
          KeyCode::E, ModifierFlag::CONTROL_L|ModifierFlag::SHIFT_L,
          KeyCode::C, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_line_copy{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
      <include path="vim_emu_ydc_mode.xml">
        <replacementdef>
          <replacementname>VIM_EMU_YDC_CHAR</replacementname>
          <replacementvalue>Y</replacementvalue>
        </replacementdef>
        <replacementdef>
          <replacementname>VIM_EMU_AFTER_MOVE</replacementname>
          <replacementvalue>
            KeyCode::C, ModifierFlag::COMMAND_L,
            {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
          </replacementvalue>
        </replacementdef>
      </include> <!-- YANK Mode -->
      <!-- DELETE Mode -->
      <block>
        <config_only>notsave.vim_emu_D{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Fix dd -->
          __KeyToKey__ KeyCode::D, ModifierFlag::NONE,
          KeyCode::A, ModifierFlag::CONTROL_L,
          KeyCode::E, ModifierFlag::CONTROL_L|ModifierFlag::SHIFT_L,
          KeyCode::X, ModifierFlag::COMMAND_L,
          KeyCode::FORWARD_DELETE,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_line_copy{{VIM_EMU_ALTCONFIG}},
        </autogen>
      </block>
      <include path="vim_emu_ydc_mode.xml">
        <replacementdef>
          <replacementname>VIM_EMU_YDC_CHAR</replacementname>
          <replacementvalue>D</replacementvalue>
        </replacementdef>
        <replacementdef>
          <replacementname>VIM_EMU_AFTER_MOVE</replacementname>
          <replacementvalue>
            KeyCode::X, ModifierFlag::COMMAND_L,
            {{VIM_EMU_FORCE_ON_NORMAL_MODE}}
          </replacementvalue>
        </replacementdef>
      </include> <!-- DELETE Mode -->
      <!-- CHANGE Mode -->
      <block>
        <config_only>notsave.vim_emu_C{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- Fix cw -->
          __KeyToKey__ KeyCode::W, ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT, ModifierFlag::SHIFT_L|ModifierFlag::OPTION_L,
          KeyCode::X, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_MODE}},
        </autogen>
      </block>
      <include path="vim_emu_ydc_mode.xml">
        <replacementdef>
          <replacementname>VIM_EMU_YDC_CHAR</replacementname>
          <replacementvalue>C</replacementvalue>
        </replacementdef>
        <replacementdef>
          <replacementname>VIM_EMU_AFTER_MOVE</replacementname>
          <replacementvalue>
            KeyCode::X, ModifierFlag::COMMAND_L,
            {{VIM_EMU_FORCE_OFF_ALL_MODE}}
          </replacementvalue>
        </replacementdef>
      </include> <!-- DELETE Mode -->
      <block><!-- Normal Mode -->
        <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Cursor Move -->
        <include path="vim_emu_move.xml"></include>
        <!-- Enter INSERT Mode, i/I/a/A/o/O -->
        <autogen>
          __KeyToKey__ KeyCode::I, ModifierFlag::NONE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::I,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
          KeyCode::CURSOR_RIGHT, ModifierFlag::OPTION_L,
          KeyCode::CURSOR_LEFT, ModifierFlag::OPTION_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::A, ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::A,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::O, ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L, KeyCode::RETURN,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::O,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_UP, KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
          KeyCode::RETURN,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <!-- v: Enter Visual Mode -->
        <autogen>
          __KeyToKey__ KeyCode::V, ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_visual{{VIM_EMU_ALTCONFIG}},
          KeyCode::CURSOR_RIGHT, ModifierFlag::SHIFT_L,
        </autogen>
        <!-- V: Enter Visual Line Mode -->
        <autogen>
          __KeyToKey__ KeyCode::V,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_visual_line{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
          KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
          KeyCode::CURSOR_DOWN, ModifierFlag::SHIFT_L,
        </autogen>
        <!-- ":":Enter Command Mode -->
        <autogen>
          __KeyToKey__ KeyCode::SEMICOLON,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_command{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::JIS_COLON,ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_command{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <!-- Cut One Character -->
        <autogen>
          __KeyToKey__ KeyCode::X, ModifierFlag::NONE,
          KeyCode::FORWARD_DELETE,
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::X,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::DELETE,
        </autogen>
        <!-- s/S -->
        <autogen>
          __KeyToKey__ KeyCode::S, ModifierFlag::NONE,
          KeyCode::FORWARD_DELETE,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::S,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::A, ModifierFlag::CONTROL_L,
          KeyCode::E, ModifierFlag::CONTROL_L|ModifierFlag::SHIFT_L,
          KeyCode::X, ModifierFlag::COMMAND_L,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_line_copy{{VIM_EMU_ALTCONFIG}},
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <!-- Paste -->
        <block>
          <config_only>notsave.vim_emu_line_copy{{VIM_EMU_ALTCONFIG}}</config_only>
          <autogen>
            __KeyToKey__ KeyCode::P, ModifierFlag::NONE,
            KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
            KeyCode::CURSOR_DOWN,
            KeyCode::V, ModifierFlag::COMMAND_L,
            KeyCode::RETURN, KeyCode::CURSOR_UP,
          </autogen>
          <autogen>
            __KeyToKey__ KeyCode::P, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT,
            KeyCode::CURSOR_LEFT, ModifierFlag::COMMAND_L,
            KeyCode::V, ModifierFlag::COMMAND_L,
            KeyCode::RETURN, KeyCode::CURSOR_UP,
          </autogen>
        </block>
        <block>
          <config_not>notsave.vim_emu_line_copy{{VIM_EMU_ALTCONFIG}}</config_not>
          <autogen>
            __KeyToKey__ KeyCode::P, ModifierFlag::NONE,
            KeyCode::CURSOR_RIGHT, KeyCode::V, ModifierFlag::COMMAND_L
          </autogen>
          <autogen>
            __KeyToKey__ KeyCode::P,
            MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
            KeyCode::V, ModifierFlag::COMMAND_L
          </autogen>
        </block>
        <!-- Undo/Redo -->
        <autogen> __KeyToKey__ KeyCode::U, ModifierFlag::NONE,
          KeyCode::Z, ModifierFlag::COMMAND_L,
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::U,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::Z, ModifierFlag::COMMAND_L,
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::R,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
          KeyCode::Z, ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L,
        </autogen>
        <!-- Replace -->
        <autogen>
          __KeyToKey__ KeyCode::R, ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_R{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::R,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_S_R{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <!-- Line Combining -->
        <autogen>
          __KeyToKey__ KeyCode::J,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
          KeyCode::SPACE, KeyCode::FORWARD_DELETE, ModifierFlag::SHIFT_L,
          KeyCode::CURSOR_LEFT,
        </autogen>
        <!-- Quit -->
        <autogen>
          __KeyToKey__ KeyCode::Z,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::VK_LOCK_EXTRA2_FORCE_ON
        </autogen>
        <autogen> <!-- Save and Quit -->
          __KeyToKey__ KeyCode::Z, ModifierFlag::EXTRA2|
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::S, ModifierFlag::COMMAND_L,
          KeyCode::W, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_MODE}}
        </autogen>
        <autogen> <!-- Quit -->
          __KeyToKey__ KeyCode::Q, ModifierFlag::EXTRA2|
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::W, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_MODE}}
        </autogen>
        <!-- Search -->
        <autogen>
          __KeyToKey__ KeyCode::SLASH, ModifierFlag::NONE,
          KeyCode::F, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen> <!-- German keyboards' slash -->
          __KeyToKey__ KeyCode::KEY_7,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::F, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}},
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::N, ModifierFlag::NONE,
          KeyCode::G, ModifierFlag::COMMAND_L,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::N,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::G, ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::KEY_8,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_LEFT, ModifierFlag::OPTION_L,
          KeyCode::CURSOR_RIGHT, ModifierFlag::OPTION_L|ModifierFlag::SHIFT_L,
          KeyCode::C, ModifierFlag::COMMAND_L,
          KeyCode::F, ModifierFlag::COMMAND_L,
          KeyCode::V, ModifierFlag::COMMAND_L,
          KeyCode::RETURN,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen> <!-- * for JIS -->
          __KeyToKey__ KeyCode::JIS_COLON,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_LEFT, ModifierFlag::OPTION_L,
          KeyCode::CURSOR_RIGHT, ModifierFlag::OPTION_L|ModifierFlag::SHIFT_L,
          KeyCode::C, ModifierFlag::COMMAND_L,
          KeyCode::F, ModifierFlag::COMMAND_L,
          KeyCode::V, ModifierFlag::COMMAND_L,
          KeyCode::RETURN,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <autogen> <!-- * for GERMAN -->
          __KeyToKey__ KeyCode::BRACKET_RIGHT,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::CURSOR_LEFT, ModifierFlag::OPTION_L,
          KeyCode::CURSOR_RIGHT, ModifierFlag::OPTION_L|ModifierFlag::SHIFT_L,
          KeyCode::C, ModifierFlag::COMMAND_L,
          KeyCode::F, ModifierFlag::COMMAND_L,
          KeyCode::V, ModifierFlag::COMMAND_L,
          KeyCode::RETURN,
          KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_search{{VIM_EMU_ALTCONFIG}},
        </autogen>
        <!-- Period (DOT): delete next word, paste  current clipboard-->
        <autogen>
          __KeyToKey__ KeyCode::DOT, ModifierFlag::NONE,
          KeyCode::CURSOR_RIGHT, ModifierFlag::SHIFT_L|ModifierFlag::OPTION_L,
          KeyCode::DELETE, KeyCode::V, ModifierFlag::COMMAND_L
        </autogen>
      </block> <!-- Normal Mode -->
      <block> <!-- Visual Mode -->
        <config_only>notsave.vim_emu_visual{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Copy and Paste -->
        <include path="vim_emu_copy_cut.xml"></include>
        <!-- Move -->
        <!-- Fix PageUp/Down -->
        <include path="vim_emu_repeat.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
            <replacementvalue>
              KeyCode::B, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_OUTPUT</replacementname>
            <replacementvalue>
              KeyCode::PAGEUP, ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
        </include>
        <include path="vim_emu_repeat.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
            <replacementvalue>
              KeyCode::F, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_OUTPUT</replacementname>
            <replacementvalue>
              KeyCode::PAGEDOWN, ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
        </include>
        <include path="vim_emu_move.xml">
          <replacementdef>
            <replacementname>VIM_EMU_USE_SHIFT</replacementname>
            <replacementvalue>ModifierFlag::SHIFT_L|</replacementvalue>
          </replacementdef>
        </include>
      </block> <!-- Visual Mode -->
      <block> <!-- Visual Line Mode (for first command)-->
        <config_only>notsave.vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Move -->
        <!-- Fix PageUp -->
        <include path="vim_emu_repeat.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
            <replacementvalue>
              KeyCode::B, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_OUTPUT</replacementname>
            <replacementvalue>
              KeyCode::PAGEUP, ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
              KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
              KeyCode::CURSOR_RIGHT,
              KeyCode::CURSOR_UP, |ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
        </include>
        <include path="vim_emu_move_up.xml">
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
              KeyCode::CURSOR_RIGHT, ModifierFlag::COMMAND_L,
              KeyCode::CURSOR_RIGHT,
              KeyCode::CURSOR_UP, |ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_USE_SHIFT</replacementname>
            <replacementvalue>ModifierFlag::SHIFT_L|</replacementvalue>
          </replacementdef>
        </include>
      </block> <!-- Visual Line Mode (for first command)-->
      <block> <!-- Visual Line Mode -->
        <config_only>notsave.vim_emu_visual_line{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Copy and Paste -->
        <include path="vim_emu_copy_cut.xml">
          <replacementdef>
            <replacementname>VIM_EMU_LINECOPY</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_line_copy{{VIM_EMU_ALTCONFIG}}
            </replacementvalue>
          </replacementdef>
        </include>
        <!-- Move -->
        <!-- Fix PageUp/Down -->
        <include path="vim_emu_repeat.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
            <replacementvalue>
              KeyCode::B, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_OUTPUT</replacementname>
            <replacementvalue>
              KeyCode::PAGEUP, ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
            </replacementvalue>
          </replacementdef>
        </include>
        <include path="vim_emu_repeat.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_INPUT</replacementname>
            <replacementvalue>
              KeyCode::F, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_REPEAT_OUTPUT</replacementname>
            <replacementvalue>
              KeyCode::PAGEDOWN, ModifierFlag::SHIFT_L,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
            </replacementvalue>
          </replacementdef>
        </include>
        <autogen>
          __KeyToKey__
          KeyCode::M, MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
          KeyCode::PAGEDOWN, ModifierFlag::SHIFT_L,
          KeyCode::PAGEUP, ModifierFlag::SHIFT_L,
        </autogen>
        <include path="vim_emu_move_up.xml">
          <replacementdef>
            <replacementname>VIM_EMU_USE_SHIFT</replacementname>
            <replacementvalue>ModifierFlag::SHIFT_L|</replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
            </replacementvalue>
          </replacementdef>
        </include>
        <include path="vim_emu_move_down.xml">
          <replacementdef>
            <replacementname>VIM_EMU_USE_SHIFT</replacementname>
            <replacementvalue>ModifierFlag::SHIFT_L|</replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_line_first{{VIM_EMU_ALTCONFIG}},
            </replacementvalue>
          </replacementdef>
        </include>
      </block> <!-- Visual Line Mode -->
      <block> <!-- Visual Block Mode -->
        <config_only>notsave.vim_emu_visual_block{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Copy and Paste -->
        <include path="vim_emu_copy_cut.xml">
          <replacementdef>
            <replacementname>VIM_EMU_ADDITIONAL_MODIFIER</replacementname>
            <replacementvalue>
              ModifierFlag::OPTION_L|ModifierFlag::COMMAND_L|
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_COPY_CUT</replacementname>
            <replacementvalue>
              KeyCode::VK_LOCK_ALL_FORCE_OFF,
              KeyCode::VK_MOUSEKEY_LOCK_BUTTON_ALL_FORCE_OFF,
            </replacementvalue>
          </replacementdef>
        </include>
        <!-- Move -->
        <autogen>
          __KeyToKey__ KeyCode::H, KeyCode::VK_MOUSEKEY_LEFT
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::J, KeyCode::VK_MOUSEKEY_DOWN
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::K, KeyCode::VK_MOUSEKEY_UP
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::L, KeyCode::VK_MOUSEKEY_RIGHT
        </autogen>
      </block> <!-- Visual Block Mode -->
      <block> <!-- Command Mode -->
        <config_only>notsave.vim_emu_command{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen> <!-- w (Used with below: EXTRA1 Modifier) -->
          __KeyToKey__ KeyCode::W, ModifierFlag::NONE,
          KeyCode::VK_LOCK_EXTRA1_FORCE_ON
        </autogen>
        <autogen> <!-- Save -->
          __KeyToKey__ KeyCode::RETURN, ModifierFlag::EXTRA1|ModifierFlag::NONE,
          KeyCode::S, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
        </autogen>
        <autogen> <!-- Save As -->
          __KeyToKey__ KeyCode::SPACE, ModifierFlag::EXTRA1|ModifierFlag::NONE,
          KeyCode::S, ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
        </autogen>
        <autogen> <!-- Save and Quit -->
          __KeyToKey__ KeyCode::Q, ModifierFlag::EXTRA1|ModifierFlag::NONE,
          KeyCode::S, ModifierFlag::COMMAND_L,
          KeyCode::W, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen> <!-- Quit -->
          __KeyToKey__ KeyCode::Q, ModifierFlag::NONE,
          KeyCode::W, ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
        <autogen> <!-- Help -->
          __KeyToKey__ KeyCode::H, ModifierFlag::NONE,
          KeyCode::SLASH, ModifierFlag::SHIFT_L|ModifierFlag::COMMAND_L,
          {{VIM_EMU_FORCE_OFF_ALL_BUT_LINE}}
        </autogen>
      </block> <!-- Command Mode -->
      <block> <!-- Replace Mode -->
        <config_only>notsave.vim_emu_R{{VIM_EMU_ALTCONFIG}}</config_only>
        <include path="vim_emu_key_wrap.xml">
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE</replacementname>
            <replacementvalue>
              KeyCode::FORWARD_DELETE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_AFTER</replacementname>
            <replacementvalue>
              {{VIM_EMU_FORCE_ON_NORMAL_MODE}},
            </replacementvalue>
          </replacementdef>
        </include>
      </block>
      <block> <!-- Replace Mode -->
        <config_only>notsave.vim_emu_S_R{{VIM_EMU_ALTCONFIG}}</config_only>
        <autogen>
          __KeyToKey__ KeyCode::H,
          MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_SHIFT|ModifierFlag::NONE,
          KeyCode::Z, ModifierFlag::COMMAND_L,
        </autogen>
        <include path="vim_emu_key_wrap.xml">
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE</replacementname>
            <replacementvalue>
              KeyCode::FORWARD_DELETE,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_AFTER</replacementname>
            <replacementvalue>
            </replacementvalue>
          </replacementdef>
        </include>
      </block>
      <!-- Repeat -->
      <autogen>
        __KeyToKey__ KeyCode::KEY_2, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_2{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_3, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_3{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_4, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_4{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_5, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_5{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_6, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_6{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_7, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_7{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_8, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_8{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <autogen>
        __KeyToKey__ KeyCode::KEY_9, ModifierFlag::NONE,
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_9{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_repeat{{VIM_EMU_ALTCONFIG}},
        KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}
      </autogen>
      <!-- Oneshot Mode: force on normal for all other keys  -->
      <block>
        <config_only>notsave.vim_emu_oneshot{{VIM_EMU_ALTCONFIG}}</config_only>
        <include path="vim_emu_replace.xml">
          <replacementdef>
            <replacementname>VIM_EMU_REPLACE</replacementname>
            <replacementvalue>KeyCode::VK_NONE</replacementvalue>
          </replacementdef>
        </include>
      </block>
    </block>
  </item>
  <item>
    <name>Disable all other non-assigned keys in other than Inser Mode</name>
    <identifier>remap.vim_emu_disable_{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <block>
      <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
      <!-- *************************************** -->
      <!-- Disable all other keys -->
      <include path="vim_emu_replace.xml">
        <replacementdef>
          <replacementname>VIM_EMU_REPLACE</replacementname>
          <replacementvalue>KeyCode::VK_NONE</replacementvalue>
        </replacementdef>
      </include>
    </block>
  </item>
  <item>
    <name>Control + [ to Esc for non-vim_emu apps</name>
    <identifier>private.vim_emu_ctl_[_to_Esc_non_vim_emu{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_IGNORE_APPS}}</only>
    <not>{{VIM_EMU_ONLY_APPS}}</not>
    <autogen>
      __KeyToKey__ KeyCode::BRACKET_LEFT,
      MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
      KeyCode::ESCAPE
    </autogen>
  </item>
  <item>
    <name>Control + [ to Esc for Normal mode</name>
    <identifier>private.vim_emu_ctl_[_to_Esc_normal_mode{{VIM_EMU_APP_NAME}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
    <autogen>
      __KeyToKey__ KeyCode::BRACKET_LEFT,
      MODIFIERFLAG_EITHER_LEFT_OR_RIGHT_CONTROL|ModifierFlag::NONE,
      KeyCode::ESCAPE
    </autogen>
  </item>
</root>
