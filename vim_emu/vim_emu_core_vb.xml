<?xml version="1.0"?>
<root>
  <item>
    <name>Enable Vim Visual Block Mode</name>
    <appendix>Use with ESC/C-[ above and "Enable Vim Emulation"</appendix>
    <appendix>Visual Block starts from where mouse cursor is,</appendix>
    <appendix>instead of where cursor in editer is.</appendix>
    <identifier>remap.vim_emu_vb{{VIM_EMU_ALTCONFIG}}</identifier>
    <only>{{VIM_EMU_ONLY_APPS}}</only>
    <not>{{VIM_EMU_IGNORE_APPS}}</not>
    <config_only>notsave.vim_emu_normal{{VIM_EMU_ALTCONFIG}}</config_only>
    <!-- Cmd-v: Enter Visual Block Mode -->
    <autogen>
      __KeyToKey__ KeyCode::V,
      VK_CONTROL|ModifierFlag::NONE,
      KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_normal{{VIM_EMU_ALTCONFIG}},
      KeyCode::VK_CONFIG_FORCE_ON_notsave_vim_emu_visual_block{{VIM_EMU_ALTCONFIG}},
      KeyCode::VK_LOCK_COMMAND_L_FORCE_ON,
      KeyCode::VK_LOCK_OPTION_L_FORCE_ON,
      KeyCode::VK_MOUSEKEY_LOCK_BUTTON_LEFT,
    </autogen>
    <block>
      <config_only>notsave.vim_emu{{VIM_EMU_ALTCONFIG}}</config_only>
      <block> <!-- Visual Block Mode -->
        <config_only>notsave.vim_emu_visual_block{{VIM_EMU_ALTCONFIG}}</config_only>
        <!-- Copy and Paste -->
        <include path="vim_emu_copy_cut.xml">
          <replacementdef>
            <replacementname>VIM_EMU_ADDITIONAL_MODIFIER</replacementname>
            <replacementvalue>
              VK_OPTION|VK_COMMAND|
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_BEFORE_COPY_CUT</replacementname>
            <replacementvalue>
              KeyCode::VK_LOCK_ALL_FORCE_OFF,
              KeyCode::VK_MOUSEKEY_LOCK_BUTTON_ALL_FORCE_OFF,
            </replacementvalue>
          </replacementdef>
          <replacementdef>
            <replacementname>VIM_EMU_AFTER_MOVE</replacementname>
            <replacementvalue>
              KeyCode::VK_CONFIG_FORCE_OFF_notsave_vim_emu_visual_block{{VIM_EMU_ALTCONFIG}},
            </replacementvalue>
          </replacementdef>
        </include>
        <autogen>
          __KeyToKey__ KeyCode::H, KeyCode::VK_MOUSEKEY_LEFT
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::J, KeyCode::VK_MOUSEKEY_DOWN
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::K, KeyCode::VK_MOUSEKEY_UP
        </autogen>
        <autogen>
          __KeyToKey__ KeyCode::L, KeyCode::VK_MOUSEKEY_RIGHT
        </autogen>
      </block> <!-- Visual Block Mode -->
    </block>
  </item> <!-- Enable Vim Visual Block Mode -->
</root>
